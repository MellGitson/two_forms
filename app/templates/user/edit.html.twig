{% extends 'base.html.twig' %}

{% block title %}Éditer l'utilisateur - {{ user.username }}{% endblock %}

{% block body %}
<div class="container">
    <a href="{{ path('app_user_show', {'id': user.id}) }}" class="btn-back">← Retour</a>
    
    <div class="form-card">
        <div class="form-header">
            <h1>Éditer {{ user.firstName }} {{ user.lastName }}</h1>
            <p class="username">@{{ user.username }}</p>
        </div>
        
        {{ form_start(form, {'attr': {'class': 'form-container'}}) }}
            <div class="form-section">
                <h2>Informations de base</h2>
                
                <div class="form-group">
                    {{ form_label(form.username, "Nom d'utilisateur") }}
                    {{ form_widget(form.username) }}
                    {{ form_errors(form.username) }}
                </div>
                
                <div class="form-group">
                    {{ form_label(form.email, 'Email') }}
                    {{ form_widget(form.email) }}
                    {{ form_errors(form.email) }}
                </div>
                
                <div class="form-group">
                    {{ form_label(form.firstName, 'Prénom') }}
                    {{ form_widget(form.firstName) }}
                    {{ form_errors(form.firstName) }}
                </div>
                
                <div class="form-group">
                    {{ form_label(form.lastName, 'Nom') }}
                    {{ form_widget(form.lastName) }}
                    {{ form_errors(form.lastName) }}
                </div>
                
                {% if form.plainPassword is defined %}
                    <div class="form-group">
                        {{ form_label(form.plainPassword, 'Mot de passe') }}
                        <p class="help-text">Laissez vide pour conserver le mot de passe actuel</p>
                        {{ form_widget(form.plainPassword) }}
                        {{ form_errors(form.plainPassword) }}
                    </div>
                {% endif %}
            </div>
            
            <div class="form-section">
                <h2>Rôles</h2>
                
                <div class="form-group">
                    {{ form_label(form.roles, 'Rôles') }}
                    {{ form_widget(form.roles) }}
                    {{ form_errors(form.roles) }}
                </div>
            </div>
            
            <div class="form-section">
                <h2>Photo de profil</h2>
                
                {% if user.profilePicture %}
                    <div class="profile-preview">
                        <img src="{{ asset('uploads/profiles/' ~ user.profilePicture) }}" alt="Photo de {{ user.firstName }} {{ user.lastName }}" class="preview-image">
                        <p>Photo actuelle</p>
                    </div>
                {% endif %}
                
                <div class="form-group">
                    {{ form_label(form.profilePicture, 'Nouvelle photo de profil (PNG, JPEG, JPG)') }}
                    <p class="help-text">Maximum 5 MB - Format: PNG, JPEG ou JPG</p>
                    {{ form_widget(form.profilePicture) }}
                    {{ form_errors(form.profilePicture) }}
                </div>
            </div>
            
            <div class="actions">
                <button type="submit" class="btn btn-primary">Sauvegarder les modifications</button>
                <a href="{{ path('app_user_show', {id: user.id}) }}" class="btn btn-secondary">Annuler</a>
            </div>
        {{ form_end(form) }}
    </div>
</div>
{% endblock %}
