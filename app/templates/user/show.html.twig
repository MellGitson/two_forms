{% extends 'base.html.twig' %}

{% block title %}Détails de l'utilisateur - {{ user.username }}{% endblock %}

{% block body %}
<div class="container">
    <h1>{{ user.username }}</h1>
    
    {% if app.flashes %}
        {% for label, messages in app.flashes %}
            <div class="alert alert-{{ label }}">
                {% for message in messages %}
                    <p>{{ message }}</p>
                {% endfor %}
            </div>
        {% endfor %}
    {% endif %}

    <div class="user-info">
        <p><strong>ID:</strong> {{ user.id }}</p>
        <p><strong>Nom d'utilisateur:</strong> {{ user.username }}</p>
        <p><strong>Rôles:</strong>
            {% for role in user.roles %}
                <span class="badge">{{ role }}</span>
            {% endfor %}
        </p>
    </div>

    <div class="actions">
        <a href="{{ path('app_user_edit', {'id': user.id}) }}" class="btn btn-warning">Éditer</a>
        
        {% if 'ROLE_MODERATOR' not in user.roles %}
            <form action="{{ path('app_user_promote_moderator', {'id': user.id}) }}" method="post" style="display: inline;">
                <input type="hidden" name="_token" value="{{ csrf_token('promote' ~ user.id) }}">
                <button type="submit" class="btn btn-success">Promouvoir Modérateur</button>
            </form>
        {% else %}
            <form action="{{ path('app_user_demote_moderator', {'id': user.id}) }}" method="post" style="display: inline;">
                <input type="hidden" name="_token" value="{{ csrf_token('demote' ~ user.id) }}">
                <button type="submit" class="btn btn-danger">Retirer Modérateur</button>
            </form>
        {% endif %}

        <a href="{{ path('app_user_index') }}" class="btn btn-secondary">Retour</a>
    </div>
</div>

<style>
    .container { max-width: 600px; margin: 0 auto; padding: 20px; font-family: Arial, sans-serif; }
    h1 { color: #333; }
    .user-info { background: #f9f9f9; padding: 20px; border-radius: 8px; margin: 20px 0; }
    .user-info p { margin: 10px 0; }
    .actions { margin: 20px 0; }
    .btn { display: inline-block; padding: 10px 20px; margin-right: 10px; text-decoration: none; border-radius: 4px; border: none; cursor: pointer; }
    .btn-warning { background-color: #ffc107; color: black; }
    .btn-success { background-color: #28a745; color: white; }
    .btn-danger { background-color: #dc3545; color: white; }
    .btn-secondary { background-color: #6c757d; color: white; }
    .btn:hover { opacity: 0.8; }
    .badge { display: inline-block; padding: 5px 10px; background-color: #007bff; color: white; border-radius: 3px; margin-right: 5px; }
    .alert { padding: 15px; margin-bottom: 20px; border-radius: 4px; }
    .alert-success { background-color: #d4edda; color: #155724; border: 1px solid #c3e6cb; }
</style>
{% endblock %}
